%-------------------------------------------------------------------------------
% seq24_pattern_editor
%-------------------------------------------------------------------------------
%
% \file        seq24_pattern_editor.tex
% \library     Documents
% \author      Chris Ahlstrom
% \date        2015-07-19
% \update      2015-07-21
% \version     $Revision$
% \license     $XPC_GPL_LICENSE$
%
%     Provides the concepts.
%
%-------------------------------------------------------------------------------

\section{Pattern Editor}
\label{sec:seq24_pattern_editor}

   The \textsl{Seq24 Pattern Editor} is used to edit and preview a pattern,
   as well as to configure its buss and channel settings.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/pattern-edit-window.png}
   \caption{Pattern Edit Window}
   \label{fig:pattern_edit_window}
\end{figure}

   This dialog is quite complex.
   For exposition, we break it into a first panel, a second panel, a
   bottom panel, and a piano-roll/events section.

   \begin{enumber}
      \item \textbf{First Panel}
      \item \textbf{Second Panel}
      \item \textbf{Piano-Roll/Events Panel}
      \item \textbf{Bottm Panel}
   \end{enumber}

\subsection{Pattern Editor, First Panel}
\label{subsec:seq24_pattern_editor_first}

   The top bar of the Pattern (sequence) Editor lets you change the name of
   the pattern, the time signature of the piece, how long the loop is, and
   some other configuration items.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/pattern-edit-first-panel-items.png}
   \caption{Pattern Editor, First Panel Items}
   \label{fig:pattern_editor_first_panel_items}
\end{figure}

   \begin{enumber}
      \item \textbf{Pattern Name}
      \item \textbf{Beats Per Bar}
      \item \textbf{Beat Unit}
      \item \textbf{Pattern Length}
      \item \textbf{MIDI Out Device}
      \item \textbf{MIDI Out Port}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Pattern Name}{pattern editor!name}
   Provides the name of the pattern.
   This name should be short and memorable.
   It is displayed in the Patterns window.

   \itempar{Beats Per Bar}{pattern editor!beats/bar}
   Part of the time signature, and specifies the number of beat units per bar.
   The possible values range from 1 to 16.

   \itempar{Beat Unit}{pattern editor!beat unit}
   Part of the time signature, and specifies the size of the beat unit:
   1 for whole notes; 2 for half notes; 4 for quarter notes; 8 for eight notes;
   and 16 for sixteenth notes.

   \itempar{Pattern Length}{pattern editor!progress}
   Sets the length of the current pattern, in measures.
   The possible values range from 1 to 16, then 32, and 64.

   \textsl{(It would sure be nice to have a value that represents
   "indefinite", so that the loop or pattern would be more like track,
   and perhaps not be repeatable.)}

   \itempar{MIDI Out Device}{pattern editor!midi out device}
   This setting specifies one of the 16 MIDI output busses provided by
   \textsl{Seq24}.  The settings look a lot like
   \figureref{fig:pattern_window_right_click_midi_bus}.

   \itempar{MIDI OUT Port}{pattern editor!midi out port}
   This settings select the MIDI output channel, or port.
   The possible values range from 1 to 16.

\subsection{Pattern Editor, Second Panel}
\label{subsec:seq24_pattern_editor_second}

   The second panel of the Pattern Editor provides a number of additional
   settings.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/pattern-edit-second-panel-items.png}
   \caption{Pattern Editor, Second Panel Items}
   \label{fig:pattern_editor_main_panel_items}
\end{figure}

   \begin{enumber}
      \item \textbf{Undo}
      \item \textbf{Redo}
      \item \textbf{Quantize Selection}
      \item \textbf{Tools}
      \item \textbf{Grid Snap}
      \item \textbf{Note Length}
      \item \textbf{Zoom}
      \item \textbf{Key of Sequence}
      \item \textbf{Musical Scale}
      \item \textbf{Background Sequence}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Undo}{pattern editor!undo}
   The Undo button will roll back any changes to the pattern from this
   session.
   It will roll back one change each time it is pressed.
   It is not certain what the undo limit is, however.

   \itempar{Redo}{pattern editor!redo}
   The Redo button will restore any undone changes to the pattern from this
   session.
   It will restore one change each time it is pressed.
   It is not certain what the redo limit is, however.

   \itempar{Quantize Selection}{pattern editor!quantize}
   Pressing this button will quantize the selected events, presumable as per
   the \textbf{Grid Snap} setting.

   \itempar{Tools}{pattern editor!tools}
   This button brings up a nested menu of tools for modifying selected
   events and notes.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/tools-first-menu.png}
   \caption{Tools Context Menu}
   \label{fig:pattern_editor_tools_first_menu}
\end{figure}

   \begin{enumber}
      \item \textbf{Select}
      \item \textbf{Modify Time}
      \item \textbf{Modify Pitch}
   \end{enumber}

   \textbf{Select} provides two sets of selections for notes:
   \textbf{All Notes}, which selects all notes in the pattern;
   \textbf{Inverse Notes}, which inverts the selection of notes.

   Note that the left mouse button also lets one select multiple events and
   notes.

   \textbf{Modify Time} offers two ways to tweak the timing of the selected
   note:
   \textbf{Quantize Selected Notes}, which quantizes the selected notes,
   presumably the same way as the \textbf{Quantize} ("\textbf{Q}") button;
   \textbf{Tighten Selected Notes}, which presumably is a less strict form
   of quantization.  (Need more information).

   \textbf{Modify Pitch} has only one entry, \textbf{Transpose Selected},
   which brings up the following sub-menu:

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/tools-transpose-selected-menu.png}
   \caption{Tools Transpose Selected Values}
   \label{fig:pattern_editor_tools_transpose_selected_menu}
\end{figure}

   \itempar{Grid Snap}{pattern editor!grid snap}
   Grid snap selects where the notes will be drawn.
   The following values are supported:
   1, 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, and 1/128.
   Additional values are also supported:
   1/3, 1/6, 1/12/, 1/24, 1/48, 1/96, and 1/192.

   \itempar{Note Length}{pattern editor!note length}
   Note Length determines what size they will be.
   Like the \textbf{Grid Snap} values,
   the following values are supported:
   1, 1/2, 1/4, 1/8, 1/16, 1/32, 1/64, and 1/128.
   Additional values are also supported:
   1/3, 1/6, 1/12/, 1/24, 1/48, 1/96, and 1/192.

   \itempar{Zoom}{pattern editor!zoom}
   Zoom is the relation between MIDI pixels and ticks, written as
   "pixels:ticks.
   For example, 1:4 = 4 ticks per pixel.
   Supported values are 1:1, 1:2, 1:4, 1:8, 1:16, and 1:32.

   \itempar{Key of Sequence}{pattern editor!key}
   Selects the desired key for the pattern.  The following scales are
   supported:  C, C\#, D, D\#, E, F, F\#, G, G\#, A, A\#, and B.

   \itempar{Musical Scale}{pattern editor!scale}
   Selects the desired scale for the pattern.
   Only the following values are supported: Off, Major, and Minor.

   One can select which \textbf{Musical Scale} and
   \textbf{Key} the piece is in,
   and \textsl{Seq24} will grey out those keys on the piano-roll that
   are not in the key.

   \itempar{Background Sequence}{pattern editor!background sequence}
   One can select another pattern to draw on the background to help with
   writing corresponding parts.
   The button brings up a small menu with values of \textbf{Off} and
   \textbf{[0]}.  Presumably, the 0 is a set number.  Under that entry, a
   menu like the following appears.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/background-sequence-menu.png}
   \caption{Sample Background Sequence Values}
   \label{fig:pattern_editor_background_sequence_menu}
\end{figure}

\subsection{Pattern Editor, Piano Roll}
\label{subsec:seq24_pattern_editor_piano_roll}

   The piano roll is the heart of the pattern (loop, sequence) editor.
   It is a bit different in style than other editors.

\subsubsection{Pattern Editor, Piano Roll Description}
\label{subsubsec:seq24_pattern_editor_piano_roll_description}

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/pattern-edit-piano-roll-items.png}
   \caption{Pattern Editor, Piano Roll Items}
   \label{fig:pattern_editor_piano_roll_items}
\end{figure}

   \begin{enumber}
      \item \textbf{Beat}
      \item \textbf{Measure}
      \item \textbf{Virtual Keyboard}
      \item \textbf{Notes}
      \item \textbf{Events}
      \item \textbf{Event Values}
   \end{enumber}

   \setcounter{ItemCounter}{0}      % Reset the ItemCounter for this list.

   \itempar{Beat}{piano roll!beat}
   The light vertical lines represent the beats defined by the configuration
   for the pattern.

   \itempar{Measure}{piano roll!measure}
   The heavy vertical lines represent the measures defined by the configuration
   for the pattern.  Also note that the end of the pattern occurs at a
   measure, and is marked by a blocky \textbf{END} marker.

   \itempar{Virtual Keyboard}{piano roll!virtual keyboard}
   The virtual keyboard is a fairly powerful interface.  It shows,
   by shadowing, which note on the keyboard one will be drawing. It can be
   played with a mouse, to preview a short motif.
   It can show marks to indicate off-scale notes, to make them easy to
   avoid.

   \itempar{Notes}{piano roll!notes}
   Musical notes are indicated by short bars.  The bars provide a visual
   representation of the pitch of the note and the length of the notes

   \itempar{Events}{piano roll!events}
   The small (just a few pixels high) Events windows shows discrete events,
   such as Note On and Note Off and their velocities, or various control and
   their values.

   \itempar{Event Values}{piano roll!event values}
   The events values for the currently selected category of events are shown
   in this window as vertical lines of a height proportional to the value.

\subsubsection{Pattern Editor, Event Editing}
\label{subsubsec:seq24_pattern_editor_event_editing}

   Note editing is a bit different with \textsl{Seq24}, since it
   requires two mouse buttons in many cases.  There are some new
   laptop touchpads from FocalTech that have only one mouse button, and
   use positioning to determine if the click is a left- or right-click.
   The Linux drivers for this touchpad aren't sophisticated enough (as far
   as we know) to handle converting a two-fingered press properly.
   We've found that a good solution is to use a four-button USB trackball
   configued with an easy middle-button setup.
   It's easier than a touchpad, anyway.

   \index{pattern editor!right click hold}
	On both the note (grid) window and the event window, \textbf{holding}
	down the \textbf{right} mouse button will change the cursor
	to a pencil and put the editor into 'draw' mode.
   
   \index{pattern editor!left click right hold}
   Then while still \textbf{holding} the \textbf{right} mouse button, click
   the \textbf{left} mouse button to \textbf{insert} new notes.  Many people
   find this combination strange at first, but once one gets used to it, it
   becomes a very fast method of note manipulation.

   \index{pattern editor!right left hold drag}
   To increase the duration of the note(s), keep dragging the mouse (with
   both buttons held) rightward.
   \index{auto-notes}
   Note that, if one keeps dragging the mouse past the duration of a
   \index{beat unit}
   beat unit (e.g. a quarter note), then multiple notes are drawn, each one
   being the duration of a beat unit.  This auto-note facility can be
   convenient.  However, if one wants a single long note, first draw the
   short note, and then use the operation described in the next paragraph to
   change the length of the note.

   \index{pattern editor!middle click}
   Pressing the \textbf{middle} mouse button will let one change 
	the length of the note. 

   \index{pattern editor!left click}
	The \textbf{left} mouse button lets you select multiple events 
   which can then be clicked and moved,
   \index{pattern editor!cut}
   \index{keys!ctrl X}
   cut (Ctrl-X), 
   \index{pattern editor!copy}
   \index{keys!ctrl C}
   copy (Ctrl-C),
   \index{pattern editor!paste}
   \index{keys!ctrl V}
   or pasted (Ctrl-V).
   When the notes are selected,
   \index{pattern editor!delete}
   \index{keys!del}
   you can delete them with the Delete key.

   For the appearance of selected events (orange), see
   \figureref{fig:pattern_editor_selected_events}.

	Right-clicking on the event strip (directly under
	the piano roll grid) will allow you to add/select/move 
	midi events (not note on/off messages) somewhat like the 
	piano grid.

	The event value (data) editor (directly under the event strip) is used 
	to change note velocities, channel pressure, control codes,
	patch select, etc.
   \index{pattern editor!draw}
   Just left-click+drag the mouse across the window to draw a line.  The
   values will match that line.  Any events that are selected in the paino
   roll or event strip can have their values modified with the mouse wheel.

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/pattern-edit-selected-events.png}
   \caption{Piano Roll, Selected Notes and Events}
   \label{fig:pattern_editor_selected_events}
\end{figure}

   TODO

\subsection{Pattern Editor, Bottom Panel}
\label{subsec:seq24_pattern_editor_bottom}

   TODO

\begin{figure}[H]
   \centering 
   \includegraphics[scale=0.75]{pattern/pattern-edit-bottom-panel-items.png}
   \caption{Pattern Editor, Bottom Panel Items}
   \label{fig:pattern_editor_bottom_panel_items}
\end{figure}

   TODO


%-------------------------------------------------------------------------------
% vim: ts=3 sw=3 et ft=tex
%-------------------------------------------------------------------------------
